<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>3Ã—3 ë™ë¬¼ í¼ì¦ (ë“œë˜ê·¸, íƒ€ì´ë¨¸ ê¸°ë¡)</title>
<style>
  html,body{height:100%}
  body{overflow:hidden;touch-action:none}

  body{overflow:hidden;}

  :root{
    --bg:#0f172a; --panel:#111827; --ink:#e5e7eb; --muted:#94a3b8; --accent:#22c55e; --warn:#f59e0b;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#0b1220,#121a2c);color:var(--ink);font-family:system-ui,Segoe UI,Roboto,Apple SD Gothic Neo,Malgun Gothic,sans-serif}
  .wrap{max-width:920px;margin:18px auto;padding:0 14px}
  header{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:12px}
  .title{font-weight:800;font-size:20px;letter-spacing:.3px}
  .stat{display:flex;gap:10px;align-items:center}
  .pill{background:#0b1220;border:1px solid #1f2937;border-radius:999px;padding:6px 10px;color:#e5e7eb}
  .btn{background:#172036;border:1px solid #27364d;color:#e5e7eb;border-radius:10px;padding:10px 14px;font-weight:600;cursor:pointer}
  .btn:hover{filter:brightness(1.15)}
  .grid{width:420px;height:420px;margin:12px auto;background:#0b1220;border:1px solid #1f2937;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.35);display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);overflow:hidden;touch-action:none}
  .tile{position:relative;user-select:none}
  .piece{position:absolute;inset:0;background-size:300% 300%;border:1px solid rgba(255,255,255,.06);cursor:grab;transition:transform .12s ease;will-change:transform}
  .piece:active{cursor:grabbing}
  .blank{background:repeating-linear-gradient(45deg,#facc15,#facc15 12px,#f59e0b 12px,#f59e0b 24px)}
  .footer{max-width:420px;margin:8px auto 24px;color:var(--muted);font-size:12px;text-align:center}
  .credits{opacity:.8}
  .toast{position:fixed;left:50%;bottom:24px;transform:translateX(-50%);background:#111827;border:1px solid #1f2937;color:#e5e7eb;padding:10px 14px;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,.4);display:none}
  .ok{color:#16a34a}

#preview {}

</style>
</head>
<body>
<div class="wrap" style="position:relative;">
  <header style="display:flex;align-items:center;gap:10px;">
    <img id="preview" alt="ì›ë³¸ ë¯¸ë¦¬ë³´ê¸°" style="width:48px;height:48px;object-fit:cover;border:2px solid #fff;border-radius:6px;box-shadow:0 2px 6px rgba(0,0,0,0.4)"/>
    <div class="title">3Ã—3 ë™ë¬¼ í¼ì¦</div>
    <div class="stat">
      <span class="pill">â± <b id="time">00:00</b></span>
      <span class="pill">ğŸ† <b id="best">--:--</b></span>
      <button class="btn" id="btnNew">ìƒˆ ì´ë¯¸ì§€</button>
      <button class="btn" id="btnShuffle">ë‹¤ì‹œ ì„ê¸°</button>
    </div>
  </header>

  <div style="position:relative;display:inline-block;">
  <div id="boardWrap" style="position:relative;display:inline-block;">
  <div id="board" class="grid" aria-label="í¼ì¦ ë³´ë“œ"></div>
  <img id="reveal" alt="ì •ë‹µ ì „ì²´ ì´ë¯¸ì§€"        style="position:absolute;inset:0;width:100%;height:100%;object-fit:cover;border-radius:16px;opacity:0;pointer-events:none;transition:opacity .35s ease"/>
</div>
</div>

  <p class="footer">
    <span id="label"></span>
    <br><span class="credits">ì´ë¯¸ì§€ëŠ” ìœ„í‚¤ë¯¸ë””ì–´ ê³µìš©ì˜ ê³µê°œ ì‚¬ì§„ì—ì„œ ë¬´ì‘ìœ„ë¡œ ì„ íƒë©ë‹ˆë‹¤.</span>
  </p>
</div>
<div id="toast" class="toast">ê¸°ë¡ ì €ì¥ë¨!</div>

<script>
(function(){
  document.addEventListener('touchmove', function(e){ e.preventDefault(); }, {passive:false});

  const N=3, SIZE=N*N;
  const board = document.getElementById('board');
  const timeEl = document.getElementById('time');
  const bestEl = document.getElementById('best');
  const labelEl = document.getElementById('label');
  const btnNew = document.getElementById('btnNew');
  const btnShuffle = document.getElementById('btnShuffle');
  const toast = document.getElementById('toast');
  const BEST_KEY='animal_puzzle_best_v1';

  const animals = [
    {name:'Lion', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nI2Y1OWUwYicgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyNmNTllMGInIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPkxpb248L3RleHQ+Cjwvc3ZnPg=='},
    {name:'Tiger', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nI2VmNDQ0NCcgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyNlZjQ0NDQnIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPlRpZ2VyPC90ZXh0Pgo8L3N2Zz4='},
    {name:'Koala', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nI2EzZTYzNScgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyNhM2U2MzUnIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPktvYWxhPC90ZXh0Pgo8L3N2Zz4='},
    {name:'Elephant', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nIzYwYTVmYScgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyM2MGE1ZmEnIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPkVsZXBoYW50PC90ZXh0Pgo8L3N2Zz4='},
    {name:'Gorilla', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nIzIyYzU1ZScgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyMyMmM1NWUnIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPkdvcmlsbGE8L3RleHQ+Cjwvc3ZnPg=='},
    {name:'Eagle', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nI2VhYjMwOCcgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyNlYWIzMDgnIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPkVhZ2xlPC90ZXh0Pgo8L3N2Zz4='},
    {name:'Zebra', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nI2QxZDVkYicgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyNkMWQ1ZGInIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPlplYnJhPC90ZXh0Pgo8L3N2Zz4='},
    {name:'Panda', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nI2YzZjRmNicgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyNmM2Y0ZjYnIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPlBhbmRhPC90ZXh0Pgo8L3N2Zz4='},
    {name:'Bear', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nIzkyNDAwZScgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyM5MjQwMGUnIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPkJlYXI8L3RleHQ+Cjwvc3ZnPg=='},
    {name:'Wolf', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nIzljYTNhZicgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyM5Y2EzYWYnIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPldvbGY8L3RleHQ+Cjwvc3ZnPg=='},
    {name:'Fox', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nI2Y5NzMxNicgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyNmOTczMTYnIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPkZveDwvdGV4dD4KPC9zdmc+'},
    {name:'Deer', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nI2I0NTMwOScgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyNiNDUzMDknIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPkRlZXI8L3RleHQ+Cjwvc3ZnPg=='},
    {name:'Horse', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nIzc4MzUwZicgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyM3ODM1MGYnIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPkhvcnNlPC90ZXh0Pgo8L3N2Zz4='},
    {name:'Penguin', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nIzFlM2E4YScgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyMxZTNhOGEnIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPlBlbmd1aW48L3RleHQ+Cjwvc3ZnPg=='},
    {name:'Owl', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nI2ZkZTY4YScgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyNmZGU2OGEnIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPk93bDwvdGV4dD4KPC9zdmc+'},
    {name:'Parrot', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nIzEwYjk4MScgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyMxMGI5ODEnIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPlBhcnJvdDwvdGV4dD4KPC9zdmc+'},
    {name:'Flamingo', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nI2Y5YThkNCcgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyNmOWE4ZDQnIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPkZsYW1pbmdvPC90ZXh0Pgo8L3N2Zz4='},
    {name:'Crocodile', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nIzE2NjUzNCcgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyMxNjY1MzQnIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPkNyb2NvZGlsZTwvdGV4dD4KPC9zdmc+'},
    {name:'Turtle', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nIzA2NWY0Nicgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyMwNjVmNDYnIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPlR1cnRsZTwvdGV4dD4KPC9zdmc+'},
    {name:'Shark', url:'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMjAwIDgwMCc+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9J2cnIHgxPScwJyB5MT0nMCcgeDI9JzEnIHkyPScxJz4KICAgICAgPHN0b3Agb2Zmc2V0PScwJScgc3RvcC1jb2xvcj0nIzFmMjkzNycvPgogICAgICA8c3RvcCBvZmZzZXQ9JzEwMCUnIHN0b3AtY29sb3I9JyMwZjE3MmEnLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSdncmFpbic+CiAgICAgIDxmZVR1cmJ1bGVuY2UgdHlwZT0nZnJhY3RhbE5vaXNlJyBiYXNlRnJlcXVlbmN5PScwLjknIG51bU9jdGF2ZXM9JzInIHN0aXRjaFRpbGVzPSdzdGl0Y2gnIHJlc3VsdD0nbicvPgogICAgICA8ZmVDb2xvck1hdHJpeCB0eXBlPSdzYXR1cmF0ZScgdmFsdWVzPScwLjInLz4KICAgICAgPGZlQmxlbmQgbW9kZT0nb3ZlcmxheScgaW49J1NvdXJjZUdyYXBoaWMnIGluMj0nbicvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPScxMjAwJyBoZWlnaHQ9JzgwMCcgZmlsbD0ndXJsKCNnKScvPgogIDxnIGZpbHRlcj0ndXJsKCNncmFpbiknIG9wYWNpdHk9JzAuOCc+CiAgICA8Y2lyY2xlIGN4PSczNDAnIGN5PSc0NDAnIHI9JzE5MCcgZmlsbD0nIzMzNDE1NScgb3BhY2l0eT0nMC44NScvPgogICAgPHJlY3QgeD0nNTIwJyB5PSczODAnIHdpZHRoPSczNjAnIGhlaWdodD0nMTQwJyByeD0nNzAnIGZpbGw9JyMzMzQxNTUnIG9wYWNpdHk9JzAuODUnLz4KICAgIDxjaXJjbGUgY3g9JzMwMCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICAgIDxjaXJjbGUgY3g9JzM3OCcgY3k9JzQwMCcgcj0nMjYnIGZpbGw9JyMwZjE3MmEnLz4KICA8L2c+CiAgPHRleHQgeD0nNTAlJyB5PSc5MCUnIGZvbnQtZmFtaWx5PSdzeXN0ZW0tdWksU2Vnb2UgVUksQXJpYWwnIGZvbnQtc2l6ZT0nNTYnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9JyNlNWU3ZWInPlNoYXJrPC90ZXh0Pgo8L3N2Zz4='}
  ];const animals = keywords.map(k=>({name: k.replace(/\b\w/g, c=>c.toUpperCase()), url: 'https://source.unsplash.com/1200x800/?'+encodeURIComponent(k)+',animal'}));
  animals.push(
    {name:'Amur Leopard', url:'https://upload.wikimedia.org/wikipedia/commons/thumb/1/16/Amur_Leopard_4.jpg/800px-Amur_Leopard_4.jpg'},
    {name:'Koala', url:'https://upload.wikimedia.org/wikipedia/commons/thumb/4/49/Koala_climbing_tree.jpg/800px-Koala_climbing_tree.jpg'},
    {name:'African Elephant', url:'https://upload.wikimedia.org/wikipedia/commons/thumb/3/37/African_Bush_Elephant.jpg/800px-African_Bush_Elephant.jpg'},
    {name:'Tiger', url:'https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/Tiger.50.jpg/800px-Tiger.50.jpg'}
  );

  let imgURL='', imgName='';
  let state = []; // positions -> value at index = original tile index, -1 for blank
  let startTime = 0, timerId=null;
  let dragging = null; // {i, el, startX, startY, dir}

  function playWin(){
  try{
    const ctx = new (window.AudioContext||window.webkitAudioContext)();
    const now = ctx.currentTime;
    const freqs = [523.25,659.25,783.99]; // C5 E5 G5
    freqs.forEach((f,i)=>{
      const o = ctx.createOscillator();
      const g = ctx.createGain();
      o.type='sine'; o.frequency.value=f;
      o.connect(g); g.connect(ctx.destination);
      g.gain.setValueAtTime(0.0001, now);
      g.gain.exponentialRampToValueAtTime(0.3, now+0.02);
      g.gain.exponentialRampToValueAtTime(0.0001, now+0.35);
      o.start(now+0.02*i);
      o.stop(now+0.4+0.02*i);
    });
  }catch(e){}
}
function fmt(ms){
    const s = Math.floor(ms/1000);
    const m = Math.floor(s/60);
    const ss = s%60;
    return String(m).padStart(2,'0')+':'+String(ss).padStart(2,'0');
  }
  function setTime(ms){ timeEl.textContent = fmt(ms); }
  function setBest(ms){ bestEl.textContent = ms>0 ? fmt(ms) : '--:--'; }
  setBest(parseInt(localStorage.getItem(BEST_KEY)||'0',10));

  function pickAnimal(){
    const a = animals[Math.floor(Math.random()*animals.length)];
    imgURL = a.url; imgName = a.name;
    labelEl.textContent = 'ì‚¬ì§„: '+imgName;
    document.getElementById('preview').src = imgURL;
}

  function idxToRC(i){ return {r:Math.floor(i/N), c:i%N}; }
  function rcToIdx(r,c){ return r*N+c; }

  function isSolvable(arr, blankIndex){
    const tiles = arr.filter(x=>x!==-1);
    let inv=0;
    for(let i=0;i<tiles.length;i++)for(let j=i+1;j<tiles.length;j++) if(tiles[i]>tiles[j]) inv++;
    if(N%2===1) return inv%2===0;
    const {r} = idxToRC(blankIndex);
    const rowFromBottom = N - r;
    return (rowFromBottom%2===0)? inv%2===1 : inv%2===0;
  }

  function shuffled(blankIndex){
    let arr = Array.from({length:SIZE}, (_,i)=>i);
    arr[blankIndex] = -1;
    for(let i=arr.length-1;i>0;i--){
      const j=(Math.random()*(i+1))|0; [arr[i],arr[j]]=[arr[j],arr[i]];
    }
    if(!isSolvable(arr, blankIndex)){
      const i = arr.findIndex(x=>x!==-1);
      const j = arr.findIndex((x,k)=>x!==-1 && k!==i);
      [arr[i],arr[j]]=[arr[j],arr[i]];
    }
    return arr;
  }

  function allPlacedExceptBlank(arr){
    for(let i=0;i<SIZE;i++){
      if(arr[i]!==-1 && arr[i]!==i) return false;
    }
    return true;
  }

  function buildBoard(){
    board.innerHTML='';
    for(let i=0;i<SIZE;i++){
      const cell = document.createElement('div');
      cell.className='tile';
      const piece = document.createElement('div');
      piece.className='piece';
      piece.dataset.index=i;
      cell.appendChild(piece);
      board.appendChild(cell);
    }
  }

  function applyBackgrounds(){
    const pieces = board.querySelectorAll('.piece');
    pieces.forEach((el,i)=>{
      const val = state[i];
      if(val===-1){
        el.classList.add('blank');
        el.style.backgroundImage='none';
      }else{
        el.classList.remove('blank');
        const r=Math.floor(val/N), c=val%N;
        const posX = (c/(N-1))*100, posY=(r/(N-1))*100;
        el.style.backgroundImage=`url("${imgURL}")`;
        el.style.backgroundPosition = posX+'% '+posY+'%';
        el.style.backgroundSize = (N*100)+'% '+(N*100)+'%';
      }
      el.style.transform='translate(0,0)';
    });
  }

  function neighborsOfEmpty(arr){
    const ei = arr.indexOf(-1);
    const {r,c}=idxToRC(ei);
    const list=[];
    if(r>0) list.push(rcToIdx(r-1,c));
    if(r<N-1) list.push(rcToIdx(r+1,c));
    if(c>0) list.push(rcToIdx(r,c-1));
    if(c<N-1) list.push(rcToIdx(r,c+1));
    return {emptyIndex:ei, neighbors:list};
  }

  function onPointerDown(e){
    const el = e.currentTarget;
    const i = parseInt(el.dataset.index,10);
    const {emptyIndex, neighbors} = neighborsOfEmpty(state);
    if(!neighbors.includes(i)) return;
    const {r:er,c:ec}=idxToRC(emptyIndex);
    const {r:tr,c:tc}=idxToRC(i);
    let dir=null;
    if(er===tr) dir = ec>tc ? 'right':'left';
    else if(ec===tc) dir = er>tr ? 'down':'up';
    if(!dir) return;
    el.setPointerCapture && el.setPointerCapture(e.pointerId);
    dragging = {i, el, dir, startX:e.clientX, startY:e.clientY};
  }

  function onPointerMove(e){
    if(!dragging) return;
    const dx = e.clientX - dragging.startX;
    const dy = e.clientY - dragging.startY;
    const step = board.clientWidth / N;
    let tx=0, ty=0;
    if(dragging.dir==='left' || dragging.dir==='right'){
      tx = Math.max(Math.min(dx, step), -step);
    }else{
      ty = Math.max(Math.min(dy, step), -step);
    }
    dragging.el.style.transform = `translate(${tx}px,${ty}px)`;
  }

  function onPointerUp(e){
    if(!dragging) return;
    const el = dragging.el;
    const m = el.style.transform;
    const step = board.clientWidth / N;
    let moved=false;
    if(m && m.startsWith('translate(')){
      const v=m.replace('translate(','').replace(')','').split(',');
      const tx=parseFloat(v[0]); const ty=parseFloat(v[1]);
      moved = (Math.abs(tx)>step/2)||(Math.abs(ty)>step/2);
    }
    el.style.transform='translate(0,0)';
    if(moved) swapWithEmpty(dragging.i);
    dragging=null;
  }

  function swapWithEmpty(i){
    const {emptyIndex} = neighborsOfEmpty(state);
    const next=[...state];
    [next[emptyIndex], next[i]] = [next[i], next[emptyIndex]];
    state = next;
    applyBackgrounds();
    if(allPlacedExceptBlank(state)){
      // reveal full image and sound
      try{ document.getElementById('reveal').src = imgURL; document.getElementById('reveal').style.opacity = '1'; }catch(e){}
      playWin();
      stopTimer();
      saveBest();
      // fill tiles with full image too
      try{
        state = Array.from({length:9}, (_,i)=>i);
        applyBackgrounds();
      }catch(e){}

      showToast('ì™„ë£Œ! ê¸°ë¡ ì €ì¥ë¨');
    }
  }

  function startTimer(){
    startTime = Date.now();
    if(timerId) cancelAnimationFrame(timerId);
    const tick = ()=>{
      const ms = Date.now()-startTime;
      setTime(ms);
      timerId = requestAnimationFrame(tick);
    };
    timerId = requestAnimationFrame(tick);
  }
  function stopTimer(){
    if(timerId){ cancelAnimationFrame(timerId); timerId=null; }
  }
  function saveBest(){
    const ms = Date.now()-startTime;
    const best = parseInt(localStorage.getItem(BEST_KEY)||'0',10);
    if(!best || ms<best){
      localStorage.setItem(BEST_KEY, String(ms));
      setBest(ms);
    }
  }
  function showToast(msg){
    toast.textContent = msg;
    toast.style.display='block';
    clearTimeout(showToast._t);
    showToast._t = setTimeout(()=> toast.style.display='none', 1400);
  }

  function shuffleAndStart(){
    try{ document.getElementById('reveal').style.opacity='0'; }catch(e){}
    const blank = (Math.random()*SIZE)|0;
    state = shuffled(blank);
    applyBackgrounds();
    stopTimer();
    setTime(0);
    startTimer();
  }

  
function loadImageAndStart(){
  // pick one embedded animal immediately
  const a = animals[(Math.random()*animals.length)|0];
  imgURL = a.url; imgName = a.name;
  labelEl.textContent = 'ì‚¬ì§„: ' + imgName;
  const preview = document.getElementById('preview');
  if(preview) preview.src = imgURL;
  try{ document.getElementById('reveal').src = imgURL; }catch(e){}
  buildBoard(); attachEvents(); shuffleAndStart();
}
;
    img.onerror = ()=>{
      console.warn('ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨:', imgURL);
      if(animals.length>1){
        animals.splice(animals.findIndex(a=>a.url===imgURL),1);
        if(animals.length) return loadImageAndStart();
      }
      imgURL='https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/No-Image-Placeholder.svg/640px-No-Image-Placeholder.svg.png'; imgName='(placeholder)';
      // fallback: try again with a different animal
      console.warn('ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨, ë‹¤ë¥¸ ë™ë¬¼ë¡œ ì¬ì‹œë„');
      setTimeout(loadImageAndStart, 100);
    };
    img.src = imgURL + (imgURL.includes('?')?'&':'?') + 'cacheBust=' + Date.now();
  }

  function attachEvents(){
    const pieces = board.querySelectorAll('.piece');
    pieces.forEach(el=>{
      el.onpointerdown = onPointerDown;
    });
    window.addEventListener('pointermove', onPointerMove);
    window.addEventListener('pointerup', onPointerUp);
    window.addEventListener('pointercancel', onPointerUp);
  }

  btnShuffle.onclick = ()=> shuffleAndStart();
  btnNew.onclick = ()=>{
    try{ document.getElementById('reveal').style.opacity='0'; }catch(e){}
    stopTimer();
    setTime(0);
    board.innerHTML='';
    loadImageAndStart();
  };

  // init
  setTime(0);
  loadImageAndStart();
})();
</script>
</body>
</html>
